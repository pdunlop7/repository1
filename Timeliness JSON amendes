{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "autosize": "pad",
  "background": "white",
  "padding": {"left": 10, "right": 10, "top": 10, "bottom": 10},
  "signals": [
    {"name": "y_step", "value": 33},
    {"name": "x_step", "value": 26},
    {"name": "yPaddingInner", "value": 0.45},
    {"name": "yPaddingOuter", "value": 0.2},
    {"name": "descriptionColumn", "value": 200},
    {"name": "specialistColumn", "value": 120},
    {"name": "phaseColumn", "value": 100},
    {"name": "progressColumn", "value": 60},
    {"name": "startColumn", "value": 100},
    {"name": "endColumn", "value": 100},
    {
      "name": "height",
      "update": "bandspace(domain('y').length, yPaddingInner, yPaddingOuter) * y_step"
    }
  ],
  "data": [
    {
      "name": "input",
      "url": "dynamic-data.json",
      "format": {
        "type": "json",
        "parse": {
          "OMP_Accepts_Package_Date": "date:'%d/%m/%Y'",
          "Proposed_Award_Date": "date:'%d/%m/%Y'"
        }
      },
      "transform": [
        {
          "type": "formula",
          "as": "encodedStart",
          "expr": "timeFormat(datum.OMP_Accepts_Package_Date, '%d/%m/%y')"
        },
        {
          "type": "formula",
          "as": "encodedEnd",
          "expr": "timeFormat(datum.Proposed_Award_Date, '%d/%m/%y')"
        },
        {
          "type": "formula",
          "as": "completionLabel",
          "expr": "datum.Progress + '%'"
        }
      ]
    }
  ],
  "scales": [
    {
      "name": "xDays",
      "type": "band",
      "domain": {"data": "input", "field": "encodedStart"},
      "range": {"step": {"signal": "x_step"}}
    },
    {
      "name": "y",
      "type": "band",
      "domain": {"data": "input", "field": "Description"},
      "range": {"step": {"signal": "y_step"}},
      "paddingInner": {"signal": "yPaddingInner"},
      "paddingOuter": {"signal": "yPaddingOuter"}
    }
  ],
  "marks": [
    {
      "type": "group",
      "name": "descriptionColumn",
      "title": {
        "text": "Description",
        "anchor": "start",
        "align": "left",
        "color": "#666666"
      },
      "encode": {
        "update": {
          "width": {"signal": "descriptionColumn"},
          "height": {"signal": "height"}
        }
      },
      "marks": [
        {
          "type": "text",
          "from": {"data": "input"},
          "encode": {
            "update": {
              "align": {"value": "left"},
              "y": {"scale": "y", "field": "Description"},
              "text": {"field": "Description"},
              "baseline": {"value": "middle"}
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "name": "specialistColumn",
      "title": {
        "text": "Assigned Specialist",
        "anchor": "start",
        "align": "left",
        "color": "#666666"
      },
      "encode": {
        "update": {
          "width": {"signal": "specialistColumn"},
          "height": {"signal": "height"}
        }
      },
      "marks": [
        {
          "type": "text",
          "from": {"data": "input"},
          "encode": {
            "update": {
              "align": {"value": "left"},
              "y": {"scale": "y", "field": "Description"},
              "text": {"field": "Assigned_Specialist"},
              "baseline": {"value": "middle"}
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "name": "phaseColumn",
      "title": {
        "text": "PTS Phase",
        "anchor": "start",
        "align": "left",
        "color": "#666666"
      },
      "encode": {
        "update": {
          "width": {"signal": "phaseColumn"},
          "height": {"signal": "height"}
        }
      },
      "marks": [
        {
          "type": "text",
          "from": {"data": "input"},
          "encode": {
            "update": {
              "align": {"value": "left"},
              "y": {"scale": "y", "field": "Description"},
              "text": {"field": "PTS_Phase"},
              "baseline": {"value": "middle"}
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "name": "progressColumn",
      "title": {
        "text": "Progress",
        "anchor": "start",
        "align": "left",
        "color": "#666666"
      },
      "encode": {
        "update": {
          "width": {"signal": "progressColumn"},
          "height": {"signal": "height"}
        }
      },
      "marks": [
        {
          "type": "text",
          "from": {"data": "input"},
          "encode": {
            "update": {
              "align": {"value": "center"},
              "y": {"scale": "y", "field": "Description"},
              "text": {"signal": "datum.completionLabel"},
              "baseline": {"value": "middle"}
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "name": "startColumn",
      "title": {
        "text": "OMP Accepts Package Date",
        "anchor": "start",
        "align": "left",
        "color": "#666666"
      },
      "encode": {
        "update": {
          "width": {"signal": "startColumn"},
          "height": {"signal": "height"}
        }
      },
      "marks": [
        {
          "type": "text",
          "from": {"data": "input"},
          "encode": {
            "update": {
              "align": {"value": "center"},
              "y": {"scale": "y", "field": "Description"},
              "text": {"signal": "datum.encodedStart"},
              "baseline": {"value": "middle"}
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "name": "endColumn",
      "title": {
        "text": "Proposed Award Date",
        "anchor": "start",
        "align": "left",
        "color": "#666666"
      },
      "encode": {
        "update": {
          "width": {"signal": "endColumn"},
          "height": {"signal": "height"}
        }
      },
      "marks": [
        {
          "type": "text",
          "from": {"data": "input"},
          "encode": {
            "update": {
              "align": {"value": "center"},
              "y": {"scale": "y", "field": "Description"},
              "text": {"signal": "datum.encodedEnd"},
              "baseline": {"value": "middle"}
            }
          }
        }
      ]
    }
  ],
  "config": {
    "view": {"stroke": "transparent"},
    "style": {
      "col": {"fontSize": 11},
      "cell": {"strokeWidth": {"signal": "0"}}
    },
    "font": "Arial",
    "text": {"font": "Arial", "fontSize": 10, "fill": "#666666"},
    "axis": {
      "labelColor": "#666666",
      "labelFontSize": 10,
      "titleFont": "Arial",
      "titleColor": "#252423",
      "titleFontSize": 16,
      "titleFontWeight": "normal"
    },
    "axisY": {"labelPadding": 10}
  }
}
